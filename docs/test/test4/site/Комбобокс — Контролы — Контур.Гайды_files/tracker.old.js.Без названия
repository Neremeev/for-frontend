if(typeof JSON2!=="object"){JSON2=window.JSON||{}}(function(){"use strict";function f(n){return n<10?"0"+n:n}function objectToJSON(value,key){var objectType=Object.prototype.toString.apply(value);if(objectType==="[object Date]"){return isFinite(value.valueOf())?value.getUTCFullYear()+"-"+f(value.getUTCMonth()+1)+"-"+f(value.getUTCDate())+"T"+f(value.getUTCHours())+":"+f(value.getUTCMinutes())+":"+f(value.getUTCSeconds())+"Z":null}if(objectType==="[object String]"||objectType==="[object Number]"||objectType==="[object Boolean]"){return value.valueOf()}if(objectType!=="[object Array]"&&typeof value.toJSON==="function"){return value.toJSON(key)}return value}var cx=new RegExp("[\0\xad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]","g"),pattern='\\\\\\"\0-\x1f\x7f-\x9f\xad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]',escapable=new RegExp("["+pattern,"g"),gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"){value=objectToJSON(value,key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON2.stringify!=="function"){JSON2.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON2.stringify")}return str("",{"":value})}}if(typeof JSON2.parse!=="function"){JSON2.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(new RegExp("^[\\],:{}\\s]*$").test(text.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON2.parse")}}})();if(typeof _paq!=="object"){_paq=[]}if(typeof Piwik!=="object"){Piwik=function(){"use strict";var KONTUR_METRIC_INITIALIZED_CLASS="km-auto-initialized";var expireDateTime,plugins={},documentAlias=document,navigatorAlias=navigator,screenAlias=screen,windowAlias=window,performanceAlias=windowAlias.performance||windowAlias.mozPerformance||windowAlias.msPerformance||windowAlias.webkitPerformance,hasLoaded=false,registeredOnLoadHandlers=[],encodeWrapper=windowAlias.encodeURIComponent,decodeWrapper=windowAlias.decodeURIComponent,urldecode=unescape,asyncTracker,iterator,Piwik;function safeDecodeWrapper(url){try{return decodeWrapper(url)}catch(e){return unescape(url)}}function isDefined(property){var propertyType=typeof property;return propertyType!=="undefined"}function isFunction(property){return typeof property==="function"}function isObject(property){return typeof property==="object"}function isString(property){return typeof property==="string"||property instanceof String}function apply(){var i,f,parameterArray;for(i=0;i<arguments.length;i+=1){parameterArray=arguments[i];f=parameterArray.shift();if(isString(f)){asyncTracker[f].apply(asyncTracker,parameterArray)}else{f.apply(asyncTracker,parameterArray)}}}function addEventListener(element,eventType,eventHandler,useCapture){if(element.addEventListener){element.addEventListener(eventType,eventHandler,useCapture);return true}if(element.attachEvent){return element.attachEvent("on"+eventType,eventHandler)}element["on"+eventType]=eventHandler}function executePluginMethod(methodName,callback){var result="",i,pluginMethod;for(i in plugins){if(Object.prototype.hasOwnProperty.call(plugins,i)){pluginMethod=plugins[i][methodName];if(isFunction(pluginMethod)){result+=pluginMethod(callback)}}}return result}function beforeUnloadHandler(){var now;executePluginMethod("unload");if(expireDateTime){do{now=new Date}while(now.getTimeAlias()<expireDateTime)}}function loadHandler(){var i;if(!hasLoaded){hasLoaded=true;executePluginMethod("load");for(i=0;i<registeredOnLoadHandlers.length;i++){registeredOnLoadHandlers[i]()}}return true}function addReadyListener(){var _timer;if(documentAlias.addEventListener){addEventListener(documentAlias,"DOMContentLoaded",function ready(){documentAlias.removeEventListener("DOMContentLoaded",ready,false);loadHandler()})}else if(documentAlias.attachEvent){documentAlias.attachEvent("onreadystatechange",function ready(){if(documentAlias.readyState==="complete"){documentAlias.detachEvent("onreadystatechange",ready);loadHandler()}});if(documentAlias.documentElement.doScroll&&windowAlias===windowAlias.top){(function ready(){if(!hasLoaded){try{documentAlias.documentElement.doScroll("left")}catch(error){setTimeout(ready,0);return}loadHandler()}})()}}if(new RegExp("WebKit").test(navigatorAlias.userAgent)){_timer=setInterval(function(){if(hasLoaded||/loaded|complete/.test(documentAlias.readyState)){clearInterval(_timer);loadHandler()}},10)}addEventListener(windowAlias,"load",loadHandler,false)}function loadScript(src,onLoad){var script=documentAlias.createElement("script");script.type="text/javascript";script.src=src;if(script.readyState){script.onreadystatechange=function(){var state=this.readyState;if(state==="loaded"||state==="complete"){script.onreadystatechange=null;onLoad()}}}else{script.onload=onLoad}documentAlias.getElementsByTagName("head")[0].appendChild(script)}function getReferrer(){var referrer="";try{referrer=windowAlias.top.document.referrer}catch(e){if(windowAlias.parent){try{referrer=windowAlias.parent.document.referrer}catch(e2){referrer=""}}}if(referrer===""){referrer=documentAlias.referrer}return referrer}function getProtocolScheme(url){var e=new RegExp("^([a-z]+):"),matches=e.exec(url);return matches?matches[1]:null}function getHostName(url){var e=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),matches=e.exec(url);return matches?matches[1]:url}function getParameter(url,name){var regexSearch="[\\?&#]"+name+"=([^&#]*)";var regex=new RegExp(regexSearch);var results=regex.exec(url);return results?decodeWrapper(results[1]):""}function utf8_encode(argString){return unescape(encodeWrapper(argString))}function sha1(str){var rotate_left=function(n,s){return n<<s|n>>>32-s},cvt_hex=function(val){var strout="",i,v;for(i=7;i>=0;i--){v=val>>>i*4&15;strout+=v.toString(16)}return strout},blockstart,i,j,W=[],H0=1732584193,H1=4023233417,H2=2562383102,H3=271733878,H4=3285377520,A,B,C,D,E,temp,str_len,word_array=[];str=utf8_encode(str);str_len=str.length;for(i=0;i<str_len-3;i+=4){j=str.charCodeAt(i)<<24|str.charCodeAt(i+1)<<16|str.charCodeAt(i+2)<<8|str.charCodeAt(i+3);word_array.push(j)}switch(str_len&3){case 0:i=2147483648;break;case 1:i=str.charCodeAt(str_len-1)<<24|8388608;break;case 2:i=str.charCodeAt(str_len-2)<<24|str.charCodeAt(str_len-1)<<16|32768;break;case 3:i=str.charCodeAt(str_len-3)<<24|str.charCodeAt(str_len-2)<<16|str.charCodeAt(str_len-1)<<8|128;break}word_array.push(i);while((word_array.length&15)!==14){word_array.push(0)}word_array.push(str_len>>>29);word_array.push(str_len<<3&4294967295);for(blockstart=0;blockstart<word_array.length;blockstart+=16){for(i=0;i<16;i++){W[i]=word_array[blockstart+i]}for(i=16;i<=79;i++){W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1)}A=H0;B=H1;C=H2;D=H3;E=H4;for(i=0;i<=19;i++){temp=rotate_left(A,5)+(B&C|~B&D)+E+W[i]+1518500249&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}for(i=20;i<=39;i++){temp=rotate_left(A,5)+(B^C^D)+E+W[i]+1859775393&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}for(i=40;i<=59;i++){temp=rotate_left(A,5)+(B&C|B&D|C&D)+E+W[i]+2400959708&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}for(i=60;i<=79;i++){temp=rotate_left(A,5)+(B^C^D)+E+W[i]+3395469782&4294967295;E=D;D=C;C=rotate_left(B,30);B=A;A=temp}H0=H0+A&4294967295;H1=H1+B&4294967295;H2=H2+C&4294967295;H3=H3+D&4294967295;H4=H4+E&4294967295}temp=cvt_hex(H0)+cvt_hex(H1)+cvt_hex(H2)+cvt_hex(H3)+cvt_hex(H4);return temp.toLowerCase()}function urlFixup(hostName,href,referrer){if(hostName==="translate.googleusercontent.com"){if(referrer===""){referrer=href}href=getParameter(href,"u");hostName=getHostName(href)}else if(hostName==="cc.bingj.com"||hostName==="webcache.googleusercontent.com"||hostName.slice(0,5)==="74.6."){href=documentAlias.links[0].href;hostName=getHostName(href)}return[hostName,href,referrer]}function domainFixup(domain){var dl=domain.length;if(domain.charAt(--dl)==="."){domain=domain.slice(0,dl)}if(domain.slice(0,2)==="*."){domain=domain.slice(1)}return domain}function titleFixup(title){title=title&&title.text?title.text:title;if(!isString(title)){var tmp=documentAlias.getElementsByTagName("title");if(tmp&&isDefined(tmp[0])){title=tmp[0].text}}return title}function getChildrenFromNode(node){if(!node){return[]}if(!isDefined(node.children)&&isDefined(node.childNodes)){return node.children}if(isDefined(node.children)){return node.children}return[]}function containsNodeElement(node,containedNode){if(!node||!containedNode){return false}if(node.contains){return node.contains(containedNode)}if(node===containedNode){return true}if(node.compareDocumentPosition){return!!(node.compareDocumentPosition(containedNode)&16)}return false}function indexOfArray(theArray,searchElement){if(theArray&&theArray.indexOf){return theArray.indexOf(searchElement)}if(!isDefined(theArray)||theArray===null){return-1}if(!theArray.length){return-1}var len=theArray.length;if(len===0){return-1}var k=0;while(k<len){if(theArray[k]===searchElement){return k}k++}return-1}function isVisible(node){if(!node){return false}function _getStyle(el,property){if(windowAlias.getComputedStyle){return documentAlias.defaultView.getComputedStyle(el,null)[property]}if(el.currentStyle){return el.currentStyle[property]}}function _elementInDocument(element){element=element.parentNode;while(element){if(element===documentAlias){return true}element=element.parentNode}return false}function _isVisible(el,t,r,b,l,w,h){var p=el.parentNode,VISIBLE_PADDING=1;if(!_elementInDocument(el)){return false}if(9===p.nodeType){return true}if("0"===_getStyle(el,"opacity")||"none"===_getStyle(el,"display")||"hidden"===_getStyle(el,"visibility")){return false}if(!isDefined(t)||!isDefined(r)||!isDefined(b)||!isDefined(l)||!isDefined(w)||!isDefined(h)){t=el.offsetTop;l=el.offsetLeft;b=t+el.offsetHeight;r=l+el.offsetWidth;w=el.offsetWidth;h=el.offsetHeight}if(node===el&&(0===h||0===w)&&"hidden"===_getStyle(el,"overflow")){return false}if(p){if("hidden"===_getStyle(p,"overflow")||"scroll"===_getStyle(p,"overflow")){if(l+VISIBLE_PADDING>p.offsetWidth+p.scrollLeft||l+w-VISIBLE_PADDING<p.scrollLeft||t+VISIBLE_PADDING>p.offsetHeight+p.scrollTop||t+h-VISIBLE_PADDING<p.scrollTop){return false}}if(el.offsetParent===p){l+=p.offsetLeft;t+=p.offsetTop}return _isVisible(p,t,r,b,l,w,h)}return true}return _isVisible(node)}function isUrlPresent(url){return url!==undefined&&url!==""&&url!=="#"}var query={htmlCollectionToArray:function(foundNodes){var nodes=[],index;if(!foundNodes||!foundNodes.length){return nodes}for(index=0;index<foundNodes.length;index++){nodes.push(foundNodes[index])}return nodes},find:function(selector){if(!document.querySelectorAll||!selector){return[]}var foundNodes=document.querySelectorAll(selector);return this.htmlCollectionToArray(foundNodes)},findMultiple:function(selectors){if(!selectors||!selectors.length){return[]}var index,foundNodes;var nodes=[];for(index=0;index<selectors.length;index++){foundNodes=this.find(selectors[index]);nodes=nodes.concat(foundNodes)}nodes=this.makeNodesUnique(nodes);return nodes},findNodesByTagName:function(node,tagName){if(!node||!tagName||!node.getElementsByTagName){return[]}var foundNodes=node.getElementsByTagName(tagName);return this.htmlCollectionToArray(foundNodes)},makeNodesUnique:function(nodes){var copy=[].concat(nodes);nodes.sort(function(n1,n2){if(n1===n2){return 0}var index1=indexOfArray(copy,n1);var index2=indexOfArray(copy,n2);if(index1===index2){return 0}return index1>index2?-1:1});if(nodes.length<=1){return nodes}var index=0;var numDuplicates=0;var duplicates=[];var node;node=nodes[index++];while(node){if(node===nodes[index]){numDuplicates=duplicates.push(index)}node=nodes[index++]||null}while(numDuplicates--){nodes.splice(duplicates[numDuplicates],1)}return nodes},getAttributeValueFromNode:function(node,attributeName){if(!this.hasNodeAttribute(node,attributeName)){return}if(node&&node.getAttribute){return node.getAttribute(attributeName)}if(!node||!node.attributes){return}var typeOfAttr=typeof node.attributes[attributeName];if("undefined"===typeOfAttr){return}if(node.attributes[attributeName].value){return node.attributes[attributeName].value}if(node.attributes[attributeName].nodeValue){return node.attributes[attributeName].nodeValue}var index;var attrs=node.attributes;if(!attrs){return}for(index=0;index<attrs.length;index++){if(attrs[index].nodeName===attributeName){return attrs[index].nodeValue}}return null},hasNodeAttributeWithValue:function(node,attributeName){var value=this.getAttributeValueFromNode(node,attributeName);return!!value},hasNodeAttribute:function(node,attributeName){if(node&&node.hasAttribute){return node.hasAttribute(attributeName)}if(node&&node.attributes){var typeOfAttr=typeof node.attributes[attributeName];return"undefined"!==typeOfAttr}return false},hasNodeCssClass:function(node,klassName){if(node&&klassName&&node.className){var classes=typeof node.className==="string"?node.className.split(" "):[];if(-1!==indexOfArray(classes,klassName)){return true}}return false},findNodesHavingAttribute:function(nodeToSearch,attributeName,nodes){if(!nodes){nodes=[]}if(!nodeToSearch||!attributeName){return nodes}var children=getChildrenFromNode(nodeToSearch);if(!children||!children.length){return nodes}var index,child;for(index=0;index<children.length;index++){child=children[index];if(this.hasNodeAttribute(child,attributeName)){nodes.push(child)}nodes=this.findNodesHavingAttribute(child,attributeName,nodes)}return nodes},findFirstNodeHavingAttribute:function(node,attributeName){if(!node||!attributeName){return}if(this.hasNodeAttribute(node,attributeName)){return node}var nodes=this.findNodesHavingAttribute(node,attributeName);if(nodes&&nodes.length){return nodes[0]}},findFirstNodeHavingAttributeWithValue:function(node,attributeName){if(!node||!attributeName){return}if(this.hasNodeAttributeWithValue(node,attributeName)){return node}var nodes=this.findNodesHavingAttribute(node,attributeName);if(!nodes||!nodes.length){return}var index;for(index=0;index<nodes.length;index++){if(this.getAttributeValueFromNode(nodes[index],attributeName)){return nodes[index]}}},findNodesHavingCssClass:function(nodeToSearch,className,nodes){if(!nodes){nodes=[]}if(!nodeToSearch||!className){return nodes}if(nodeToSearch.getElementsByClassName){var foundNodes=nodeToSearch.getElementsByClassName(className);return this.htmlCollectionToArray(foundNodes)}var children=getChildrenFromNode(nodeToSearch);if(!children||!children.length){return[]}var index,child;for(index=0;index<children.length;index++){child=children[index];if(this.hasNodeCssClass(child,className)){nodes.push(child)}nodes=this.findNodesHavingCssClass(child,className,nodes)}return nodes},findFirstNodeHavingClass:function(node,className){if(!node||!className){return}if(this.hasNodeCssClass(node,className)){return node}var nodes=this.findNodesHavingCssClass(node,className);if(nodes&&nodes.length){return nodes[0]}},isLinkElement:function(node){if(!node){return false}var elementName=String(node.nodeName).toLowerCase();var linkElementNames=["a","area"];var pos=indexOfArray(linkElementNames,elementName);return pos!==-1},setAnyAttribute:function(node,attrName,attrValue){if(!node||!attrName){return}if(node.setAttribute){node.setAttribute(attrName,attrValue)}else{node[attrName]=attrValue}},isHrefPresent:function(node){if(!node){return}var href=this.getAttributeValueFromNode(node,"href");return isUrlPresent(href)},isActionPresent:function(node){if(!node){return}var action=this.getAttributeValueFromNode(node,"action");return isUrlPresent(action)},isIdPresent:function(node){if(!node){return}var id=this.getAttributeValueFromNode(node,"id");return id!==undefined&&id!==""},hasEventHandler:function(node,event){if(!node||!event){return false}if(node["on"+event]){return true}if(window.jQuery){var events=$._data(node,"events");if(events&&events[event]){return true}}return false},findParentByTag:function(node,tagName){if(!node){return}var parent=node.parentNode;while(parent&&parent.tagName){if(parent.tagName.toLowerCase()==tagName){return parent}parent=parent.parentNode}return null},getSelectValue:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if(option.selected||i===index){value=query.getAttributeValueFromNode(option,"value");if(one){return value}values.push(value)}}return values}};var content={CONTENT_ATTR:"data-track-content",CONTENT_CLASS:"piwikTrackContent",CONTENT_NAME_ATTR:"data-content-name",CONTENT_PIECE_ATTR:"data-content-piece",CONTENT_PIECE_CLASS:"piwikContentPiece",CONTENT_TARGET_ATTR:"data-content-target",CONTENT_TARGET_CLASS:"piwikContentTarget",CONTENT_IGNOREINTERACTION_ATTR:"data-content-ignoreinteraction",CONTENT_IGNOREINTERACTION_CLASS:"piwikContentIgnoreInteraction",location:undefined,findContentNodes:function(){var cssSelector="."+this.CONTENT_CLASS;var attrSelector="["+this.CONTENT_ATTR+"]";var contentNodes=query.findMultiple([cssSelector,attrSelector]);return contentNodes},findContentNodesWithinNode:function(node){if(!node){return[]}var nodes1=query.findNodesHavingCssClass(node,this.CONTENT_CLASS);var nodes2=query.findNodesHavingAttribute(node,this.CONTENT_ATTR);if(nodes2&&nodes2.length){var index;for(index=0;index<nodes2.length;index++){nodes1.push(nodes2[index])}}if(query.hasNodeAttribute(node,this.CONTENT_ATTR)){nodes1.push(node)}else if(query.hasNodeCssClass(node,this.CONTENT_CLASS)){nodes1.push(node)}nodes1=query.makeNodesUnique(nodes1);return nodes1},findParentContentNode:function(anyNode){if(!anyNode){return}var node=anyNode;var counter=0;while(node&&node!==documentAlias&&node.parentNode){if(query.hasNodeAttribute(node,this.CONTENT_ATTR)){return node}if(query.hasNodeCssClass(node,this.CONTENT_CLASS)){return node}node=node.parentNode;if(counter>1e3){break}counter++}},findPieceNode:function(node){var contentPiece;contentPiece=query.findFirstNodeHavingAttribute(node,this.CONTENT_PIECE_ATTR);if(!contentPiece){contentPiece=query.findFirstNodeHavingClass(node,this.CONTENT_PIECE_CLASS)}if(contentPiece){return contentPiece}return node},findTargetNodeNoDefault:function(node){if(!node){return}var target=query.findFirstNodeHavingAttributeWithValue(node,this.CONTENT_TARGET_ATTR);if(target){return target}target=query.findFirstNodeHavingAttribute(node,this.CONTENT_TARGET_ATTR);if(target){return target}target=query.findFirstNodeHavingClass(node,this.CONTENT_TARGET_CLASS);if(target){return target}},findTargetNode:function(node){var target=this.findTargetNodeNoDefault(node);if(target){return target}return node},findContentName:function(node){if(!node){return}var nameNode=query.findFirstNodeHavingAttributeWithValue(node,this.CONTENT_NAME_ATTR);if(nameNode){return query.getAttributeValueFromNode(nameNode,this.CONTENT_NAME_ATTR)}var contentPiece=this.findContentPiece(node);if(contentPiece){return this.removeDomainIfIsInLink(contentPiece)}if(query.hasNodeAttributeWithValue(node,"title")){return query.getAttributeValueFromNode(node,"title")}var clickUrlNode=this.findPieceNode(node);if(query.hasNodeAttributeWithValue(clickUrlNode,"title")){return query.getAttributeValueFromNode(clickUrlNode,"title")}var targetNode=this.findTargetNode(node);if(query.hasNodeAttributeWithValue(targetNode,"title")){return query.getAttributeValueFromNode(targetNode,"title")}},findContentPiece:function(node){if(!node){return}var nameNode=query.findFirstNodeHavingAttributeWithValue(node,this.CONTENT_PIECE_ATTR);if(nameNode){return query.getAttributeValueFromNode(nameNode,this.CONTENT_PIECE_ATTR)}var contentNode=this.findPieceNode(node);var media=this.findMediaUrlInNode(contentNode);if(media){return this.toAbsoluteUrl(media)}},findContentTarget:function(node){if(!node){return}var targetNode=this.findTargetNode(node);if(query.hasNodeAttributeWithValue(targetNode,this.CONTENT_TARGET_ATTR)){return query.getAttributeValueFromNode(targetNode,this.CONTENT_TARGET_ATTR)}var href;if(query.hasNodeAttributeWithValue(targetNode,"href")){href=query.getAttributeValueFromNode(targetNode,"href");return this.toAbsoluteUrl(href)}var contentNode=this.findPieceNode(node);if(query.hasNodeAttributeWithValue(contentNode,"href")){href=query.getAttributeValueFromNode(contentNode,"href");return this.toAbsoluteUrl(href)}},isSameDomain:function(url){if(!url||!url.indexOf){return false}if(0===url.indexOf(this.getLocation().origin)){return true}var posHost=url.indexOf(this.getLocation().host);if(8>=posHost&&0<=posHost){return true}return false},removeDomainIfIsInLink:function(text){var regexContainsProtocol="^https?://[^/]+";var regexReplaceDomain="^.*//[^/]+";if(text&&text.search&&-1!==text.search(new RegExp(regexContainsProtocol))&&this.isSameDomain(text)){text=text.replace(new RegExp(regexReplaceDomain),"");if(!text){text="/"}}return text},findMediaUrlInNode:function(node){if(!node){return}var mediaElements=["img","embed","video","audio"];var elementName=node.nodeName.toLowerCase();if(-1!==indexOfArray(mediaElements,elementName)&&query.findFirstNodeHavingAttributeWithValue(node,"src")){var sourceNode=query.findFirstNodeHavingAttributeWithValue(node,"src");return query.getAttributeValueFromNode(sourceNode,"src")}if(elementName==="object"&&query.hasNodeAttributeWithValue(node,"data")){return query.getAttributeValueFromNode(node,"data")}if(elementName==="object"){var params=query.findNodesByTagName(node,"param");if(params&&params.length){var index;for(index=0;index<params.length;index++){if("movie"===query.getAttributeValueFromNode(params[index],"name")&&query.hasNodeAttributeWithValue(params[index],"value")){return query.getAttributeValueFromNode(params[index],"value")}}}var embed=query.findNodesByTagName(node,"embed");if(embed&&embed.length){return this.findMediaUrlInNode(embed[0])}}},trim:function(text){if(text&&String(text)===text){return text.replace(/^\s+|\s+$/g,"")}return text},isOrWasNodeInViewport:function(node){if(!node||!node.getBoundingClientRect||node.nodeType!==1){return true}var rect=node.getBoundingClientRect();var html=documentAlias.documentElement||{};var wasVisible=rect.top<0;if(wasVisible&&node.offsetTop){wasVisible=node.offsetTop+rect.height>0}var docWidth=html.clientWidth;if(windowAlias.innerWidth&&docWidth>windowAlias.innerWidth){docWidth=windowAlias.innerWidth}var docHeight=html.clientHeight;if(windowAlias.innerHeight&&docHeight>windowAlias.innerHeight){docHeight=windowAlias.innerHeight}return(rect.bottom>0||wasVisible)&&rect.right>0&&rect.left<docWidth&&(rect.top<docHeight||wasVisible)},isNodeVisible:function(node){var isItVisible=isVisible(node);var isInViewport=this.isOrWasNodeInViewport(node);return isItVisible&&isInViewport},buildInteractionRequestParams:function(interaction,name,piece,target){var params="";if(interaction){params+="c_i="+encodeWrapper(interaction)}if(name){if(params){params+="&"}params+="c_n="+encodeWrapper(name)}if(piece){if(params){params+="&"}params+="c_p="+encodeWrapper(piece)}if(target){if(params){params+="&"}params+="c_t="+encodeWrapper(target)}return params},buildImpressionRequestParams:function(name,piece,target){var params="c_n="+encodeWrapper(name)+"&c_p="+encodeWrapper(piece);if(target){params+="&c_t="+encodeWrapper(target)}return params},buildContentBlock:function(node){if(!node){return}var name=this.findContentName(node);var piece=this.findContentPiece(node);var target=this.findContentTarget(node);name=this.trim(name);piece=this.trim(piece);target=this.trim(target);return{name:name||"Unknown",piece:piece||"Unknown",target:target||""}},collectContent:function(contentNodes){if(!contentNodes||!contentNodes.length){return[]}var contents=[];var index,contentBlock;for(index=0;index<contentNodes.length;index++){contentBlock=this.buildContentBlock(contentNodes[index]);if(isDefined(contentBlock)){contents.push(contentBlock)}}return contents},setLocation:function(location){this.location=location},getLocation:function(){var locationAlias=this.location||windowAlias.location;if(!locationAlias.origin){locationAlias.origin=locationAlias.protocol+"//"+locationAlias.hostname+(locationAlias.port?":"+locationAlias.port:"")}return locationAlias},toAbsoluteUrl:function(url){if((!url||String(url)!==url)&&url!==""){return url}if(""===url){return this.getLocation().href}if(url.search(/^\/\//)!==-1){return this.getLocation().protocol+url}if(url.search(/:\/\//)!==-1){return url}if(0===url.indexOf("#")){return this.getLocation().origin+this.getLocation().pathname+url}if(0===url.indexOf("?")){return this.getLocation().origin+this.getLocation().pathname+url}if(0===url.search("^[a-zA-Z]{2,11}:")){return url}if(url.search(/^\//)!==-1){return this.getLocation().origin+url}var regexMatchDir="(.*/)";var base=this.getLocation().origin+this.getLocation().pathname.match(new RegExp(regexMatchDir))[0];return base+url},isUrlToCurrentDomain:function(url){var absoluteUrl=this.toAbsoluteUrl(url);if(!absoluteUrl){return false}var origin=this.getLocation().origin;if(origin===absoluteUrl){return true}if(0===String(absoluteUrl).indexOf(origin)){if(":"===String(absoluteUrl).substr(origin.length,1)){return false}return true}return false},setHrefAttribute:function(node,url){if(!node||!url){return}query.setAnyAttribute(node,"href",url)},shouldIgnoreInteraction:function(targetNode){var hasAttr=query.hasNodeAttribute(targetNode,this.CONTENT_IGNOREINTERACTION_ATTR);var hasClass=query.hasNodeCssClass(targetNode,this.CONTENT_IGNOREINTERACTION_CLASS);return hasAttr||hasClass}};function getPiwikUrlForOverlay(trackerUrl,apiUrl){if(apiUrl){return apiUrl}if(trackerUrl.slice(-9)==="piwik.php"){trackerUrl=trackerUrl.slice(0,trackerUrl.length-9)}return trackerUrl}function isOverlaySession(configTrackerSiteId){var windowName="Piwik_Overlay";var referrerRegExp=new RegExp("index\\.php\\?module=Overlay&action=startOverlaySession"+"&idSite=([0-9]+)&period=([^&]+)&date=([^&]+)$");var match=referrerRegExp.exec(documentAlias.referrer);if(match){var idsite=match[1];if(idsite!==String(configTrackerSiteId)){return false}var period=match[2],date=match[3];windowAlias.name=windowName+"###"+period+"###"+date}var windowNameParts=windowAlias.name.split("###");return windowNameParts.length===3&&windowNameParts[0]===windowName}function injectOverlayScripts(configTrackerUrl,configApiUrl,configTrackerSiteId){var windowNameParts=windowAlias.name.split("###"),period=windowNameParts[1],date=windowNameParts[2],piwikUrl=getPiwikUrlForOverlay(configTrackerUrl,configApiUrl);loadScript(piwikUrl+"plugins/Overlay/client/client.js?v=1",function(){Piwik_Overlay_Client.initialize(piwikUrl,configTrackerSiteId,period,date)})}function Tracker(trackerUrl,siteId){var registeredHooks={},locationArray=urlFixup(documentAlias.domain,windowAlias.location.href,getReferrer()),domainAlias=domainFixup(locationArray[0]),locationHrefAlias=safeDecodeWrapper(locationArray[1]),configReferrerUrl=safeDecodeWrapper(locationArray[2]),enableJSErrorTracking=false,defaultRequestMethod="GET",configRequestMethod=defaultRequestMethod,defaultRequestContentType="application/x-www-form-urlencoded; charset=UTF-8",configRequestContentType=defaultRequestContentType,configTrackerUrl=trackerUrl||"",configApiUrl="",configAppendToTrackingUrl="",configTrackerSiteId=siteId||"",configUserId="",visitorUUID="",configCustomUrl,configTitle=documentAlias.title,configDownloadExtensions=["7z","aac","apk","arc","arj","asf","asx","avi","azw3","bin","csv","deb","dmg","doc","docx","epub","exe","flv","gif","gz","gzip","hqx","ibooks","jar","jpg","jpeg","js","mobi","mp2","mp3","mp4","mpg","mpeg","mov","movie","msi","msp","odb","odf","odg","ods","odt","ogg","ogv","pdf","phps","png","ppt","pptx","qt","qtm","ra","ram","rar","rpm","sea","sit","tar","tbz","tbz2","bz","bz2","tgz","torrent","txt","wav","wma","wmv","wpd","xls","xlsx","xml","z","zip"],configHostsAlias=[domainAlias],configIgnoreClasses=[],configDownloadClasses=[],configLinkClasses=[],configTrackerPause=500,configMinimumVisitTime,configHeartBeatDelay,heartBeatPingIfActivityAlias,configDiscardHashTag,configCustomData,configCampaignNameParameters=["pk_campaign","piwik_campaign","utm_campaign","utm_source","utm_medium"],configCampaignKeywordParameters=["pk_kwd","piwik_kwd","utm_term"],configCookieNamePrefix="_pk_",configCookieDomain,configCookiePath,configCookiesDisabled=false,configDoNotTrack,configCountPreRendered,configConversionAttributionFirstReferrer,configVisitorCookieTimeout=339552e5,configSessionCookieTimeout=18e5,configReferralCookieTimeout=15768e6,configPerformanceTrackingEnabled=true,configPerformanceGenerationTime=0,configStoreCustomVariablesInCookie=false,customVariables=false,configCustomRequestContentProcessing,customVariablesPage={},customVariablesEvent={},customVariableMaximumLength=200,ecommerceItems={},browserFeatures={},trackedContentImpressions=[],isTrackOnlyVisibleContentEnabled=false,timeNextTrackingRequestCanBeExecutedImmediately=false,linkTrackingInstalled=false,linkTrackingEnabled=false,kmAutoTrackingInstalled=false,heartBeatSetUp=false,lastTrackerRequestTime=null,heartBeatTimeout,lastButton,lastTarget,hash=sha1,domainHash;function setCookie(cookieName,value,msToExpire,path,domain,secure){if(configCookiesDisabled){return}var expiryDate;if(msToExpire){expiryDate=new Date;expiryDate.setTime(expiryDate.getTime()+msToExpire)}documentAlias.cookie=cookieName+"="+encodeWrapper(value)+(msToExpire?";expires="+expiryDate.toGMTString():"")+";path="+(path||"/")+(domain?";domain="+domain:"")+(secure?";secure":"")}function getCookie(cookieName){if(configCookiesDisabled){return 0}var cookiePattern=new RegExp("(^|;)[ ]*"+cookieName+"=([^;]*)"),cookieMatch=cookiePattern.exec(documentAlias.cookie);return cookieMatch?decodeWrapper(cookieMatch[2]):0}function purify(url){var targetPattern;if(configDiscardHashTag){targetPattern=new RegExp("#.*");return url.replace(targetPattern,"")}return url}function resolveRelativeReference(baseUrl,url){var protocol=getProtocolScheme(url),i;if(protocol){return url}if(url.slice(0,1)==="/"){return getProtocolScheme(baseUrl)+"://"+getHostName(baseUrl)+url}baseUrl=purify(baseUrl);i=baseUrl.indexOf("?");if(i>=0){baseUrl=baseUrl.slice(0,i)}i=baseUrl.lastIndexOf("/");if(i!==baseUrl.length-1){baseUrl=baseUrl.slice(0,i+1)}return baseUrl+url}function isSiteHostName(hostName){var i,alias,offset;for(i=0;i<configHostsAlias.length;i++){alias=domainFixup(configHostsAlias[i].toLowerCase());if(hostName===alias){return true}if(alias.slice(0,1)==="."){if(hostName===alias.slice(1)){return true}offset=hostName.length-alias.length;if(offset>0&&hostName.slice(offset)===alias){return true}}}return false}function getImage(request,callback){var image=new Image(1,1);var src=configTrackerUrl+(configTrackerUrl.indexOf("?")<0?"?":"&")+request;var safeCallback=function(){if(typeof callback==="function"){callback()}};if(beforeGetImageAction(safeCallback,src,request)){image.onload=safeCallback;image.src=src}}function sendXmlHttpRequest(request,callback,fallbackToGet){if(!isDefined(fallbackToGet)||null===fallbackToGet){fallbackToGet=true}try{var xhr=windowAlias.XMLHttpRequest?new windowAlias.XMLHttpRequest:windowAlias.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null;xhr.open("POST",configTrackerUrl,true);xhr.onreadystatechange=function(){if(this.readyState===4&&!(this.status>=200&&this.status<300)&&fallbackToGet){getImage(request,callback)}else{if(typeof callback==="function"){callback()}}};xhr.setRequestHeader("Content-Type",configRequestContentType);xhr.send(request)}catch(e){if(fallbackToGet){getImage(request,callback)}}}function setExpireDateTime(delay){var now=new Date;var time=now.getTime()+delay;if(!expireDateTime||time>expireDateTime){expireDateTime=time}}function heartBeatUp(delay){if(heartBeatTimeout||!configHeartBeatDelay){return}heartBeatTimeout=setTimeout(function heartBeat(){heartBeatTimeout=null;if(heartBeatPingIfActivityAlias()){return}var now=new Date,heartBeatDelay=configHeartBeatDelay-(now.getTime()-lastTrackerRequestTime);heartBeatDelay=Math.min(configHeartBeatDelay,heartBeatDelay);heartBeatUp(heartBeatDelay)},delay||configHeartBeatDelay)}function heartBeatDown(){if(!heartBeatTimeout){return}clearTimeout(heartBeatTimeout);heartBeatTimeout=null}function heartBeatOnFocus(){if(heartBeatPingIfActivityAlias()){return}heartBeatUp()}function heartBeatOnBlur(){heartBeatDown()}function setUpHeartBeat(){if(heartBeatSetUp||!configHeartBeatDelay){return}heartBeatSetUp=true;addEventListener(windowAlias,"focus",heartBeatOnFocus);addEventListener(windowAlias,"blur",heartBeatOnBlur);heartBeatUp()}function makeSureThereIsAGapAfterFirstTrackingRequestToPreventMultipleVisitorCreation(callback){var now=new Date;var timeNow=now.getTime();lastTrackerRequestTime=timeNow;if(timeNextTrackingRequestCanBeExecutedImmediately&&timeNow<timeNextTrackingRequestCanBeExecutedImmediately){var timeToWait=timeNextTrackingRequestCanBeExecutedImmediately-timeNow;setTimeout(callback,timeToWait);setExpireDateTime(timeToWait+50);timeNextTrackingRequestCanBeExecutedImmediately+=50;return}if(timeNextTrackingRequestCanBeExecutedImmediately===false){var delayInMs=800;timeNextTrackingRequestCanBeExecutedImmediately=timeNow+delayInMs}callback()}function sendRequest(request,delay,callback){if(!configDoNotTrack&&request){makeSureThereIsAGapAfterFirstTrackingRequestToPreventMultipleVisitorCreation(function(){if(configRequestMethod==="POST"){sendXmlHttpRequest(request,callback)}else{getImage(request,callback)}setExpireDateTime(delay)})}if(!heartBeatSetUp){setUpHeartBeat()}else{heartBeatUp()}}function canSendBulkRequest(requests){if(configDoNotTrack){return false}return requests&&requests.length}function sendBulkRequest(requests,delay){if(!canSendBulkRequest(requests)){return}var bulk='{"requests":["?'+requests.join('","?')+'"]}';makeSureThereIsAGapAfterFirstTrackingRequestToPreventMultipleVisitorCreation(function(){sendXmlHttpRequest(bulk,null,false);setExpireDateTime(delay)})}function getCookieName(baseName){return configCookieNamePrefix+baseName+"."+configTrackerSiteId+"."+domainHash}function hasCookies(){if(configCookiesDisabled){return"0"}if(!isDefined(navigatorAlias.cookieEnabled)){var testCookieName=getCookieName("testcookie");setCookie(testCookieName,"1");return getCookie(testCookieName)==="1"?"1":"0"}return navigatorAlias.cookieEnabled?"1":"0"}function updateDomainHash(){domainHash=hash((configCookieDomain||domainAlias)+(configCookiePath||"/")).slice(0,4)}function getCustomVariablesFromCookie(){var cookieName=getCookieName("cvar"),cookie=getCookie(cookieName);if(cookie.length){cookie=JSON2.parse(cookie);if(isObject(cookie)){return cookie}}return{}}function loadCustomVariables(){if(customVariables===false){customVariables=getCustomVariablesFromCookie()}}function generateRandomUuid(){return hash((navigatorAlias.userAgent||"")+(navigatorAlias.platform||"")+JSON2.stringify(browserFeatures)+(new Date).getTime()+Math.random()).slice(0,16)}function loadVisitorIdCookie(){var now=new Date,nowTs=Math.round(now.getTime()/1e3),visitorIdCookieName=getCookieName("id"),id=getCookie(visitorIdCookieName),cookieValue,uuid;if(id){cookieValue=id.split(".");cookieValue.unshift("0");if(visitorUUID.length){cookieValue[1]=visitorUUID}return cookieValue}if(visitorUUID.length){uuid=visitorUUID}else if("0"===hasCookies()){uuid=""}else{uuid=generateRandomUuid()}cookieValue=["1",uuid,nowTs,0,nowTs,"",""];return cookieValue}function getValuesFromVisitorIdCookie(){var cookieVisitorIdValue=loadVisitorIdCookie(),newVisitor=cookieVisitorIdValue[0],uuid=cookieVisitorIdValue[1],createTs=cookieVisitorIdValue[2],visitCount=cookieVisitorIdValue[3],currentVisitTs=cookieVisitorIdValue[4],lastVisitTs=cookieVisitorIdValue[5];if(!isDefined(cookieVisitorIdValue[6])){cookieVisitorIdValue[6]=""}var lastEcommerceOrderTs=cookieVisitorIdValue[6];return{newVisitor:newVisitor,uuid:uuid,createTs:createTs,visitCount:visitCount,currentVisitTs:currentVisitTs,lastVisitTs:lastVisitTs,lastEcommerceOrderTs:lastEcommerceOrderTs}}function getRemainingVisitorCookieTimeout(){var now=new Date,nowTs=now.getTime(),cookieCreatedTs=getValuesFromVisitorIdCookie().createTs;var createTs=parseInt(cookieCreatedTs,10);var originalTimeout=createTs*1e3+configVisitorCookieTimeout-nowTs;return originalTimeout}function setVisitorIdCookie(visitorIdCookieValues){if(!configTrackerSiteId){return}var now=new Date,nowTs=Math.round(now.getTime()/1e3);if(!isDefined(visitorIdCookieValues)){visitorIdCookieValues=getValuesFromVisitorIdCookie()}var cookieValue=visitorIdCookieValues.uuid+"."+visitorIdCookieValues.createTs+"."+visitorIdCookieValues.visitCount+"."+nowTs+"."+visitorIdCookieValues.lastVisitTs+"."+visitorIdCookieValues.lastEcommerceOrderTs;setCookie(getCookieName("id"),cookieValue,getRemainingVisitorCookieTimeout(),configCookiePath,configCookieDomain)}function loadReferrerAttributionCookie(){var cookie=getCookie(getCookieName("ref"));if(cookie.length){try{cookie=JSON2.parse(cookie);if(isObject(cookie)){return cookie}}catch(ignore){}}return["","",0,""]}function deleteCookie(cookieName,path,domain){setCookie(cookieName,"",-86400,path,domain)}function isPossibleToSetCookieOnDomain(domainToTest){var valueToSet="testvalue";setCookie("test",valueToSet,1e4,null,domainToTest);if(getCookie("test")===valueToSet){deleteCookie("test",null,domainToTest);return true}return false}function deleteCookies(){var savedConfigCookiesDisabled=configCookiesDisabled;configCookiesDisabled=false;var cookiesToDelete=["id","ses","cvar","ref"];var index,cookieName;for(index=0;index<cookiesToDelete.length;index++){cookieName=getCookieName(cookiesToDelete[index]);if(0!==getCookie(cookieName)){deleteCookie(cookieName,configCookiePath,configCookieDomain)}}configCookiesDisabled=savedConfigCookiesDisabled}function setSiteId(siteId){configTrackerSiteId=siteId;setVisitorIdCookie()}function sortObjectByKeys(value){if(!value||!isObject(value)){return}var keys=[];var key;for(key in value){if(Object.prototype.hasOwnProperty.call(value,key)){keys.push(key)}}var normalized={};keys.sort();var len=keys.length;var i;for(i=0;i<len;i++){normalized[keys[i]]=value[keys[i]]}return normalized}function setSessionCookie(){setCookie(getCookieName("ses"),"*",configSessionCookieTimeout,configCookiePath,configCookieDomain)}function getRequest(request,customData,pluginMethod,currentEcommerceOrderTs){var i,now=new Date,nowTs=Math.round(now.getTime()/1e3),referralTs,referralUrl,referralUrlMaxLength=1024,currentReferrerHostName,originalReferrerHostName,customVariablesCopy=customVariables,cookieSessionName=getCookieName("ses"),cookieReferrerName=getCookieName("ref"),cookieCustomVariablesName=getCookieName("cvar"),cookieSessionValue=getCookie(cookieSessionName),attributionCookie=loadReferrerAttributionCookie(),currentUrl=configCustomUrl||safeDecodeWrapper(windowAlias.location.href),campaignNameDetected,campaignKeywordDetected;if(configCookiesDisabled){deleteCookies()}if(configDoNotTrack){return""}var cookieVisitorIdValues=getValuesFromVisitorIdCookie();if(!isDefined(currentEcommerceOrderTs)){currentEcommerceOrderTs=""}var charSet=documentAlias.characterSet||documentAlias.charset;if(!charSet||charSet.toLowerCase()==="utf-8"){charSet=null}campaignNameDetected=attributionCookie[0];campaignKeywordDetected=attributionCookie[1];referralTs=attributionCookie[2];referralUrl=attributionCookie[3];if(!cookieSessionValue){var visitDuration=configSessionCookieTimeout/1e3;if(!cookieVisitorIdValues.lastVisitTs||nowTs-cookieVisitorIdValues.lastVisitTs>visitDuration){cookieVisitorIdValues.visitCount++;cookieVisitorIdValues.lastVisitTs=cookieVisitorIdValues.currentVisitTs}if(!configConversionAttributionFirstReferrer||!campaignNameDetected.length){for(i in configCampaignNameParameters){if(Object.prototype.hasOwnProperty.call(configCampaignNameParameters,i)){campaignNameDetected=getParameter(currentUrl,configCampaignNameParameters[i]);if(campaignNameDetected.length){break}}}for(i in configCampaignKeywordParameters){if(Object.prototype.hasOwnProperty.call(configCampaignKeywordParameters,i)){campaignKeywordDetected=getParameter(currentUrl,configCampaignKeywordParameters[i]);if(campaignKeywordDetected.length){break}}}}currentReferrerHostName=getHostName(configReferrerUrl);originalReferrerHostName=referralUrl.length?getHostName(referralUrl):"";if(currentReferrerHostName.length&&!isSiteHostName(currentReferrerHostName)&&(!configConversionAttributionFirstReferrer||!originalReferrerHostName.length||isSiteHostName(originalReferrerHostName))){referralUrl=configReferrerUrl}if(referralUrl.length||campaignNameDetected.length){referralTs=nowTs;attributionCookie=[campaignNameDetected,campaignKeywordDetected,referralTs,purify(referralUrl.slice(0,referralUrlMaxLength))];setCookie(cookieReferrerName,JSON2.stringify(attributionCookie),configReferralCookieTimeout,configCookiePath,configCookieDomain)}}request+="&idsite="+configTrackerSiteId+"&rec=1"+"&r="+String(Math.random()).slice(2,8)+"&h="+now.getHours()+"&m="+now.getMinutes()+"&s="+now.getSeconds()+"&url="+encodeWrapper(purify(currentUrl))+(configReferrerUrl.length?"&urlref="+encodeWrapper(purify(configReferrerUrl)):"")+(configUserId&&configUserId.length?"&uid="+encodeWrapper(configUserId):"")+"&_id="+cookieVisitorIdValues.uuid+"&_idts="+cookieVisitorIdValues.createTs+"&_idvc="+cookieVisitorIdValues.visitCount+"&_idn="+cookieVisitorIdValues.newVisitor+(campaignNameDetected.length?"&_rcn="+encodeWrapper(campaignNameDetected):"")+(campaignKeywordDetected.length?"&_rck="+encodeWrapper(campaignKeywordDetected):"")+"&_refts="+referralTs+"&_viewts="+cookieVisitorIdValues.lastVisitTs+(String(cookieVisitorIdValues.lastEcommerceOrderTs).length?"&_ects="+cookieVisitorIdValues.lastEcommerceOrderTs:"")+(String(referralUrl).length?"&_ref="+encodeWrapper(purify(referralUrl.slice(0,referralUrlMaxLength))):"")+(charSet?"&cs="+encodeWrapper(charSet):"")+"&send_image=0";for(i in browserFeatures){if(Object.prototype.hasOwnProperty.call(browserFeatures,i)){request+="&"+i+"="+browserFeatures[i]}}if(customData){request+="&data="+encodeWrapper(JSON2.stringify(customData))}else if(configCustomData){request+="&data="+encodeWrapper(JSON2.stringify(configCustomData))}function appendCustomVariablesToRequest(customVariables,parameterName){var customVariablesStringified=JSON2.stringify(customVariables);if(customVariablesStringified.length>2){return"&"+parameterName+"="+encodeWrapper(customVariablesStringified)}return""}var sortedCustomVarPage=sortObjectByKeys(customVariablesPage);var sortedCustomVarEvent=sortObjectByKeys(customVariablesEvent);request+=appendCustomVariablesToRequest(sortedCustomVarPage,"cvar");request+=appendCustomVariablesToRequest(sortedCustomVarEvent,"e_cvar");if(customVariables){request+=appendCustomVariablesToRequest(customVariables,"_cvar");for(i in customVariablesCopy){if(Object.prototype.hasOwnProperty.call(customVariablesCopy,i)){if(customVariables[i][0]===""||customVariables[i][1]===""){delete customVariables[i]}}}if(configStoreCustomVariablesInCookie){setCookie(cookieCustomVariablesName,JSON2.stringify(customVariables),configSessionCookieTimeout,configCookiePath,configCookieDomain)}}if(configPerformanceTrackingEnabled){if(configPerformanceGenerationTime){request+="&gt_ms="+configPerformanceGenerationTime}else if(performanceAlias&&performanceAlias.timing&&performanceAlias.timing.requestStart&&performanceAlias.timing.responseEnd){request+="&gt_ms="+(performanceAlias.timing.responseEnd-performanceAlias.timing.requestStart)}}cookieVisitorIdValues.lastEcommerceOrderTs=isDefined(currentEcommerceOrderTs)&&String(currentEcommerceOrderTs).length?currentEcommerceOrderTs:cookieVisitorIdValues.lastEcommerceOrderTs;setVisitorIdCookie(cookieVisitorIdValues);setSessionCookie();request+=executePluginMethod(pluginMethod);if(configAppendToTrackingUrl.length){request+="&"+configAppendToTrackingUrl}if(isFunction(configCustomRequestContentProcessing)){request=configCustomRequestContentProcessing(request)}return request}heartBeatPingIfActivityAlias=function heartBeatPingIfActivity(){var now=new Date;if(lastTrackerRequestTime+configHeartBeatDelay<=now.getTime()){var requestPing=getRequest("ping=1",null,"ping");sendRequest(requestPing,configTrackerPause);return true}return false};function logEcommerce(orderId,grandTotal,subTotal,tax,shipping,discount){var request="idgoal=0",lastEcommerceOrderTs,now=new Date,items=[],sku;if(String(orderId).length){request+="&ec_id="+encodeWrapper(orderId);lastEcommerceOrderTs=Math.round(now.getTime()/1e3)}request+="&revenue="+grandTotal;if(String(subTotal).length){request+="&ec_st="+subTotal}if(String(tax).length){request+="&ec_tx="+tax}if(String(shipping).length){request+="&ec_sh="+shipping}if(String(discount).length){request+="&ec_dt="+discount}if(ecommerceItems){for(sku in ecommerceItems){if(Object.prototype.hasOwnProperty.call(ecommerceItems,sku)){if(!isDefined(ecommerceItems[sku][1])){ecommerceItems[sku][1]=""}if(!isDefined(ecommerceItems[sku][2])){ecommerceItems[sku][2]=""}if(!isDefined(ecommerceItems[sku][3])||String(ecommerceItems[sku][3]).length===0){ecommerceItems[sku][3]=0}if(!isDefined(ecommerceItems[sku][4])||String(ecommerceItems[sku][4]).length===0){ecommerceItems[sku][4]=1}items.push(ecommerceItems[sku])}}request+="&ec_items="+encodeWrapper(JSON2.stringify(items))}request=getRequest(request,configCustomData,"ecommerce",lastEcommerceOrderTs);sendRequest(request,configTrackerPause)}function logEcommerceOrder(orderId,grandTotal,subTotal,tax,shipping,discount){if(String(orderId).length&&isDefined(grandTotal)){logEcommerce(orderId,grandTotal,subTotal,tax,shipping,discount)}}function logEcommerceCartUpdate(grandTotal){if(isDefined(grandTotal)){logEcommerce("",grandTotal,"","","","")}}function logPageView(customTitle,customData){var now=new Date,request=getRequest("action_name="+encodeWrapper(titleFixup(customTitle||configTitle)),customData,"log");sendRequest(request,configTrackerPause)}function getClassesRegExp(configClasses,defaultClass){var i,classesRegExp="(^| )(piwik[_-]"+defaultClass;if(configClasses){for(i=0;i<configClasses.length;i++){classesRegExp+="|"+configClasses[i]}}classesRegExp+=")( |$)";return new RegExp(classesRegExp)}function startsUrlWithTrackerUrl(url){return configTrackerUrl&&url&&0===String(url).indexOf(configTrackerUrl)}function isHashTagLink(href){var hrefSplit=href.split("#"),currentSplit=documentAlias.location.href.split("#");if(hrefSplit.length<2&&currentSplit.length<2){return false}return hrefSplit[1]!=currentSplit[1]}function getLinkType(className,href,isInLink,hasDownloadAttribute){if(startsUrlWithTrackerUrl(href)){return 0}var downloadPattern=getClassesRegExp(configDownloadClasses,"download"),linkPattern=getClassesRegExp(configLinkClasses,"link"),downloadExtensionsPattern=new RegExp("\\.("+configDownloadExtensions.join("|")+")([?&#]|$)","i");if(linkPattern.test(className)){return"link"}if(hasDownloadAttribute||downloadPattern.test(className)||downloadExtensionsPattern.test(href)){return"download"}if(isInLink){return isHashTagLink(href)?"hashtag":0}return"link"}function getSourceElement(sourceElement){var parentElement;parentElement=sourceElement.parentNode;while(parentElement!==null&&isDefined(parentElement)){if(query.isLinkElement(sourceElement)){break}sourceElement=parentElement;parentElement=sourceElement.parentNode}return sourceElement}function getLinkIfShouldBeProcessed(sourceElement){sourceElement=getSourceElement(sourceElement);if(!query.hasNodeAttribute(sourceElement,"href")){return}if(!isDefined(sourceElement.href)){return}var href=query.getAttributeValueFromNode(sourceElement,"href");if(startsUrlWithTrackerUrl(href)){return}var originalSourceHostName=sourceElement.hostname||getHostName(sourceElement.href);var sourceHostName=originalSourceHostName.toLowerCase();var sourceHref=sourceElement.href.replace(originalSourceHostName,sourceHostName);var scriptProtocol=new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i");if(!scriptProtocol.test(sourceHref)){var linkType=getLinkType(sourceElement.className,sourceHref,isSiteHostName(sourceHostName),query.hasNodeAttribute(sourceElement,"download"));if(linkType){return{type:linkType,href:sourceHref}}}}function buildContentInteractionRequest(interaction,name,piece,target){var params=content.buildInteractionRequestParams(interaction,name,piece,target);if(!params){return}return getRequest(params,null,"contentInteraction")}function buildContentInteractionTrackingRedirectUrl(url,contentInteraction,contentName,contentPiece,contentTarget){if(!isDefined(url)){return}if(startsUrlWithTrackerUrl(url)){return url}var redirectUrl=content.toAbsoluteUrl(url);var request="redirecturl="+encodeWrapper(redirectUrl)+"&";request+=buildContentInteractionRequest(contentInteraction,contentName,contentPiece,contentTarget||url);var separator="&";if(configTrackerUrl.indexOf("?")<0){separator="?"}return configTrackerUrl+separator+request}function isNodeAuthorizedToTriggerInteraction(contentNode,interactedNode){if(!contentNode||!interactedNode){return false}var targetNode=content.findTargetNode(contentNode);if(content.shouldIgnoreInteraction(targetNode)){return false}targetNode=content.findTargetNodeNoDefault(contentNode);if(targetNode&&!containsNodeElement(targetNode,interactedNode)){return false}return true}function getContentInteractionToRequestIfPossible(anyNode,interaction,fallbackTarget){if(!anyNode){return}var contentNode=content.findParentContentNode(anyNode);if(!contentNode){return}if(!isNodeAuthorizedToTriggerInteraction(contentNode,anyNode)){return}var contentBlock=content.buildContentBlock(contentNode);if(!contentBlock){return}if(!contentBlock.target&&fallbackTarget){contentBlock.target=fallbackTarget}return content.buildInteractionRequestParams(interaction,contentBlock.name,contentBlock.piece,contentBlock.target)}function wasContentImpressionAlreadyTracked(contentBlock){if(!trackedContentImpressions||!trackedContentImpressions.length){return false}var index,trackedContent;for(index=0;index<trackedContentImpressions.length;index++){trackedContent=trackedContentImpressions[index];if(trackedContent&&trackedContent.name===contentBlock.name&&trackedContent.piece===contentBlock.piece&&trackedContent.target===contentBlock.target){return true}}return false}function replaceHrefIfInternalLink(contentBlock){if(!contentBlock){return false}var targetNode=content.findTargetNode(contentBlock);if(!targetNode||content.shouldIgnoreInteraction(targetNode)){return false}var link=getLinkIfShouldBeProcessed(targetNode);if(linkTrackingEnabled&&link&&link.type){return false}if(query.isLinkElement(targetNode)&&query.hasNodeAttributeWithValue(targetNode,"href")){var url=String(query.getAttributeValueFromNode(targetNode,"href"));if(0===url.indexOf("#")){return false}if(startsUrlWithTrackerUrl(url)){return true}if(!content.isUrlToCurrentDomain(url)){return false}var block=content.buildContentBlock(contentBlock);if(!block){return}var contentName=block.name;var contentPiece=block.piece;var contentTarget=block.target;if(!query.hasNodeAttributeWithValue(targetNode,content.CONTENT_TARGET_ATTR)||targetNode.wasContentTargetAttrReplaced){targetNode.wasContentTargetAttrReplaced=true;contentTarget=content.toAbsoluteUrl(url);query.setAnyAttribute(targetNode,content.CONTENT_TARGET_ATTR,contentTarget)}var targetUrl=buildContentInteractionTrackingRedirectUrl(url,"click",contentName,contentPiece,contentTarget);content.setHrefAttribute(targetNode,targetUrl);return true}return false}function replaceHrefsIfInternalLink(contentNodes){if(!contentNodes||!contentNodes.length){return}var index;for(index=0;index<contentNodes.length;index++){replaceHrefIfInternalLink(contentNodes[index])}}function trackContentImpressionClickInteraction(targetNode){return function(event){if(!targetNode){return}var contentBlock=content.findParentContentNode(targetNode);var interactedElement;if(event){interactedElement=event.target||event.srcElement}if(!interactedElement){interactedElement=targetNode}if(!isNodeAuthorizedToTriggerInteraction(contentBlock,interactedElement)){return}setExpireDateTime(configTrackerPause);if(query.isLinkElement(targetNode)&&query.hasNodeAttributeWithValue(targetNode,"href")&&query.hasNodeAttributeWithValue(targetNode,content.CONTENT_TARGET_ATTR)){var href=query.getAttributeValueFromNode(targetNode,"href");if(!startsUrlWithTrackerUrl(href)&&targetNode.wasContentTargetAttrReplaced){query.setAnyAttribute(targetNode,content.CONTENT_TARGET_ATTR,"")}}var link=getLinkIfShouldBeProcessed(targetNode);if(linkTrackingInstalled&&link&&link.type){return link.type}if(replaceHrefIfInternalLink(contentBlock)){return"href"}var block=content.buildContentBlock(contentBlock);if(!block){return}var contentName=block.name;var contentPiece=block.piece;var contentTarget=block.target;var request=buildContentInteractionRequest("click",contentName,contentPiece,contentTarget);sendRequest(request,configTrackerPause);return request}}function setupInteractionsTracking(contentNodes){if(!contentNodes||!contentNodes.length){return}var index,targetNode;for(index=0;index<contentNodes.length;index++){targetNode=content.findTargetNode(contentNodes[index]);if(targetNode&&!targetNode.contentInteractionTrackingSetupDone){targetNode.contentInteractionTrackingSetupDone=true;addEventListener(targetNode,"click",trackContentImpressionClickInteraction(targetNode))}}}function buildContentImpressionsRequests(contents,contentNodes){if(!contents||!contents.length){return[]}var index,request;for(index=0;index<contents.length;index++){if(wasContentImpressionAlreadyTracked(contents[index])){contents.splice(index,1);index--}else{trackedContentImpressions.push(contents[index])}}if(!contents||!contents.length){return[]}replaceHrefsIfInternalLink(contentNodes);setupInteractionsTracking(contentNodes);var requests=[];for(index=0;index<contents.length;index++){request=getRequest(content.buildImpressionRequestParams(contents[index].name,contents[index].piece,contents[index].target),undefined,"contentImpressions");requests.push(request)}return requests}function getContentImpressionsRequestsFromNodes(contentNodes){var contents=content.collectContent(contentNodes);return buildContentImpressionsRequests(contents,contentNodes)}function getCurrentlyVisibleContentImpressionsRequestsIfNotTrackedYet(contentNodes){if(!contentNodes||!contentNodes.length){return[]}var index;for(index=0;index<contentNodes.length;index++){if(!content.isNodeVisible(contentNodes[index])){contentNodes.splice(index,1);index--}}if(!contentNodes||!contentNodes.length){return[]}return getContentImpressionsRequestsFromNodes(contentNodes)}function buildContentImpressionRequest(contentName,contentPiece,contentTarget){var params=content.buildImpressionRequestParams(contentName,contentPiece,contentTarget);return getRequest(params,null,"contentImpression")}function buildContentInteractionRequestNode(node,contentInteraction){if(!node){return}var contentNode=content.findParentContentNode(node);var contentBlock=content.buildContentBlock(contentNode);if(!contentBlock){return}if(!contentInteraction){contentInteraction="Unknown"}return buildContentInteractionRequest(contentInteraction,contentBlock.name,contentBlock.piece,contentBlock.target)}function buildEventRequest(category,action,name,value){return"e_c="+encodeWrapper(category)+"&e_a="+encodeWrapper(action)+(isDefined(name)?"&e_n="+encodeWrapper(name):"")+(isDefined(value)?"&e_v="+encodeWrapper(value):"")}function logEvent(category,action,name,value,customData){if(String(category).length===0||String(action).length===0){return false}var request=getRequest(buildEventRequest(category,action,name,value),customData,"event");sendRequest(request,configTrackerPause)}function logSiteSearch(keyword,category,resultsCount,customData){var request=getRequest("search="+encodeWrapper(keyword)+(category?"&search_cat="+encodeWrapper(category):"")+(isDefined(resultsCount)?"&search_count="+resultsCount:""),customData,"sitesearch");sendRequest(request,configTrackerPause)}function logGoal(idGoal,customRevenue,customData){var request=getRequest("idgoal="+idGoal+(customRevenue?"&revenue="+customRevenue:""),customData,"goal");sendRequest(request,configTrackerPause)}function logLink(url,linkType,customData,callback,sourceElement){var linkParams=linkType+"="+encodeWrapper(purify(url));var interaction=getContentInteractionToRequestIfPossible(sourceElement,"click",url);if(interaction){linkParams+="&"+interaction}var request=getRequest(linkParams,customData,"link");sendRequest(request,callback?0:configTrackerPause,callback)}function objectToQueryString(object){var result=[];for(var key in object)if(object.hasOwnProperty(key)){result.push(encodeWrapper(key)+"="+encodeWrapper(object[key]))}return result.join("&")}function logKAction(category,action,params){if(String(category).length===0||String(action).length===0){return false}var queryParams=objectToQueryString(params||{});var actionQuery="k_c="+encodeWrapper(category)+"&k_a="+encodeWrapper(action)+(queryParams.length>0?"&"+queryParams:"");var request=getRequest(actionQuery,false,"kAction");sendRequest(request,configTrackerPause)}function prefixPropertyName(prefix,propertyName){if(prefix!==""){return prefix+propertyName.charAt(0).toUpperCase()+propertyName.slice(1)}return propertyName}function trackCallback(callback){var isPreRendered,i,prefixes=["","webkit","ms","moz"],prefix;if(!configCountPreRendered){for(i=0;i<prefixes.length;i++){prefix=prefixes[i];if(Object.prototype.hasOwnProperty.call(documentAlias,prefixPropertyName(prefix,"hidden"))){if(documentAlias[prefixPropertyName(prefix,"visibilityState")]==="prerender"){isPreRendered=true}break}}}if(isPreRendered){addEventListener(documentAlias,prefix+"visibilitychange",function ready(){documentAlias.removeEventListener(prefix+"visibilitychange",ready,false);callback()});return}callback()}function trackCallbackOnLoad(callback){if(documentAlias.readyState==="complete"){callback()}else if(windowAlias.addEventListener){windowAlias.addEventListener("load",callback)}else if(windowAlias.attachEvent){windowAlias.attachEvent("onLoad",callback)}}function trackCallbackOnReady(callback){var loaded=false;if(documentAlias.attachEvent){loaded=documentAlias.readyState==="complete"}else{loaded=documentAlias.readyState!=="loading"}if(loaded){callback()}else if(documentAlias.addEventListener){documentAlias.addEventListener("DOMContentLoaded",callback)}else if(documentAlias.attachEvent){documentAlias.attachEvent("onreadystatechange",callback)}}function processClick(sourceElement){var link=getLinkIfShouldBeProcessed(sourceElement);if(link&&link.type){link.href=decodeWrapper(link.href);logLink(link.href,link.type,undefined,null,sourceElement)}}function isIE8orOlder(){return documentAlias.all&&!documentAlias.addEventListener}function getKeyCodeFromEvent(event){var which=event.which;var typeOfEventButton=typeof event.button;if(!which&&typeOfEventButton!=="undefined"){if(isIE8orOlder()){if(event.button&1){which=1}else if(event.button&2){which=3}else if(event.button&4){which=2}}else{if(event.button===0||event.button==="0"){which=1}else if(event.button&1){which=2}else if(event.button&2){which=3}}}return which}function getNameOfClickedButton(event){switch(getKeyCodeFromEvent(event)){case 1:return"left";case 2:return"middle";case 3:return"right"}}function getTargetElementFromEvent(event){return event.target||event.srcElement}function clickHandler(enable){return function(event){event=event||windowAlias.event;var button=getNameOfClickedButton(event);var target=getTargetElementFromEvent(event);if(event.type==="click"){var ignoreClick=false;if(enable&&button==="middle"){ignoreClick=true}if(target&&!ignoreClick){processClick(target)}}else if(event.type==="mousedown"){if(button==="middle"&&target){lastButton=button;lastTarget=target}else{lastButton=lastTarget=null}}else if(event.type==="mouseup"){if(button===lastButton&&target===lastTarget){processClick(target)}lastButton=lastTarget=null}else if(event.type==="contextmenu"){processClick(target)}}}function addClickListener(element,enable){addEventListener(element,"click",clickHandler(enable),false);if(enable){addEventListener(element,"mouseup",clickHandler(enable),false);addEventListener(element,"mousedown",clickHandler(enable),false);addEventListener(element,"contextmenu",clickHandler(enable),false)}}function linkKMFilter(linkElement){return query.isHrefPresent(linkElement)}function addClickListeners(enable){if(!linkTrackingInstalled){linkTrackingInstalled=true;var i,ignorePattern=getClassesRegExp(configIgnoreClasses,"ignore"),linkElements=documentAlias.links;if(linkElements){for(i=0;i<linkElements.length;i++){if(!linkKMFilter(linkElements[i])){continue}if(!ignorePattern.test(linkElements[i].className)){addClickListener(linkElements[i],enable)}}}}}function addInitializedClass(element){var newClass=element.className?element.className+" "+KONTUR_METRIC_INITIALIZED_CLASS:KONTUR_METRIC_INITIALIZED_CLASS;query.setAnyAttribute(element,"class",newClass)}function addKMListener(elements,event,handler,filter){for(var i=0;i<elements.length;++i){var element=elements[i];var notInitializedYet=!query.hasNodeCssClass(element,KONTUR_METRIC_INITIALIZED_CLASS);if(notInitializedYet&&(filter==undefined||filter(element))){addEventListener(element,event,handler,false);addInitializedClass(element)}}}function kmCommonTagFilter(element){var id=query.getAttributeValueFromNode(element,"id");return query.isIdPresent(element)&&query.hasEventHandler(element,"click")}function buildAutoKMHandler(action,paramsBuilder){return function(event){event=event||windowAlias.event;var target=getTargetElementFromEvent(event);logKAction("auto",action,paramsBuilder(target))}}var kmAutoClickHandler=buildAutoKMHandler("click",function(target){return{el_tag:target.tagName.toLowerCase(),el_id:query.getAttributeValueFromNode(target,"id")}});var kmAutoFormSubmitHandler=buildAutoKMHandler("submit",function(target){return{el_tag:"form",el_id:query.getAttributeValueFromNode(target,"id"),el_action:query.getAttributeValueFromNode(target,"action")}});var kmAutoChangeTextInput=buildAutoKMHandler("change",function(target){var form=query.findParentByTag(target,"form");return{form_id:query.getAttributeValueFromNode(form,"id")||"",form_action:query.getAttributeValueFromNode(form,"action")||"",el_tag:"input",el_name:query.getAttributeValueFromNode(target,"name"),el_type:query.getAttributeValueFromNode(target,"type"),el_value:query.getAttributeValueFromNode(target,"value")}});var kmAutoChangeCheckboxInput=buildAutoKMHandler("change",function(target){var form=query.findParentByTag(target,"form");return{form_id:query.getAttributeValueFromNode(form,"id")||"",form_action:query.getAttributeValueFromNode(form,"action")||"",el_tag:"input",el_type:"checkbox",el_name:query.getAttributeValueFromNode(target,"name"),el_checked:target.checked}});var kmAutoChangeSelect=buildAutoKMHandler("change",function(target){var values=query.getSelectValue(target);var form=query.findParentByTag(target,"form");return{form_id:query.getAttributeValueFromNode(form,"id")||"",form_action:query.getAttributeValueFromNode(form,"action")||"",el_tag:"select",el_name:query.getAttributeValueFromNode(target,"name"),el_value:values.join?values.join(","):values.toString()}});var kmAutoChangeTextArea=buildAutoKMHandler("change",function(target){var form=query.findParentByTag(target,"form");return{form_id:query.getAttributeValueFromNode(form,"id")||"",form_action:query.getAttributeValueFromNode(form,"action")||"",el_tag:"textarea",el_name:query.getAttributeValueFromNode(target,"name")}});function elementFilterByName(element){var name=query.getAttributeValueFromNode(element,"name");return!!name}function addMKListenerToInputs(elements){for(var i=0;i<elements.length;++i){var element=elements[i];if(!elementFilterByName(element)){continue}var initializedYet=query.hasNodeCssClass(element,KONTUR_METRIC_INITIALIZED_CLASS);if(initializedYet){continue}else{addInitializedClass(element)}var type=query.getAttributeValueFromNode(element,"type");if(typeof type==="string"&&typeof type.toLowerCase==="function"){type=type.toLowerCase()}switch(type){case"text":case"file":case"password":case"radio":addEventListener(element,"change",kmAutoChangeTextInput,false);break;case"checkbox":addEventListener(element,"change",kmAutoChangeCheckboxInput,false);break;default:break}}}function addKMListeners(){addKMListener(documentAlias.links,"click",kmAutoClickHandler,function(element){return query.isIdPresent(element)&&!query.isHrefPresent(element)});var body=documentAlias.body;addKMListener(body.getElementsByTagName("button"),"click",kmAutoClickHandler,function(element){return query.isIdPresent(element)});addKMListener(body.getElementsByTagName("div"),"click",kmAutoClickHandler,kmCommonTagFilter);addKMListener(body.getElementsByTagName("span"),"click",kmAutoClickHandler,kmCommonTagFilter);addKMListener(body.getElementsByTagName("li"),"click",kmAutoClickHandler,kmCommonTagFilter);addKMListener(documentAlias.forms,"submit",kmAutoFormSubmitHandler,function(element){return query.isActionPresent(element)});addMKListenerToInputs(body.getElementsByTagName("input"));addKMListener(body.getElementsByTagName("select"),"change",kmAutoChangeSelect,elementFilterByName);addKMListener(body.getElementsByTagName("textarea"),"change",kmAutoChangeTextArea,elementFilterByName)}function enableTrackOnlyVisibleContent(checkOnSroll,timeIntervalInMs,tracker){if(isTrackOnlyVisibleContentEnabled){return true}isTrackOnlyVisibleContentEnabled=true;var didScroll=false;var events,index;function setDidScroll(){didScroll=true}trackCallbackOnLoad(function(){function checkContent(intervalInMs){setTimeout(function(){if(!isTrackOnlyVisibleContentEnabled){return}didScroll=false;tracker.trackVisibleContentImpressions();checkContent(intervalInMs)},intervalInMs)}function checkContentIfDidScroll(intervalInMs){setTimeout(function(){if(!isTrackOnlyVisibleContentEnabled){return}if(didScroll){didScroll=false;tracker.trackVisibleContentImpressions()}checkContentIfDidScroll(intervalInMs)},intervalInMs)}if(checkOnSroll){events=["scroll","resize"];for(index=0;index<events.length;index++){if(documentAlias.addEventListener){documentAlias.addEventListener(events[index],setDidScroll)}else{windowAlias.attachEvent("on"+events[index],setDidScroll)}}checkContentIfDidScroll(100)}if(timeIntervalInMs&&timeIntervalInMs>0){timeIntervalInMs=parseInt(timeIntervalInMs,10);checkContent(timeIntervalInMs)}})}function detectBrowserFeatures(){var i,mimeType,pluginMap={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},devicePixelRatio=windowAlias.devicePixelRatio||1;if(!new RegExp("MSIE").test(navigatorAlias.userAgent)){if(navigatorAlias.mimeTypes&&navigatorAlias.mimeTypes.length){for(i in pluginMap){if(Object.prototype.hasOwnProperty.call(pluginMap,i)){mimeType=navigatorAlias.mimeTypes[pluginMap[i]];browserFeatures[i]=mimeType&&mimeType.enabledPlugin?"1":"0"}}}if(typeof navigator.javaEnabled!=="unknown"&&isDefined(navigatorAlias.javaEnabled)&&navigatorAlias.javaEnabled()){browserFeatures.java="1"}if(isFunction(windowAlias.GearsFactory)){browserFeatures.gears="1"}browserFeatures.cookie=hasCookies()}browserFeatures.res=screenAlias.width*devicePixelRatio+"x"+screenAlias.height*devicePixelRatio}function getMethodNames(paq){var methods=[];for(iterator=0;iterator<paq.length;iterator++){methods.push(paq[iterator][0])}return methods}function registerHook(hookName,userHook){var hookObj=null;if(isString(hookName)&&!isDefined(registeredHooks[hookName])&&userHook){if(isObject(userHook)){hookObj=userHook}else if(isString(userHook)){try{eval("hookObj ="+userHook)}catch(ignore){}}registeredHooks[hookName]=hookObj}return hookObj}var beforeGetImageAction=function(callback){callback();return true};function setBeforeGetImageAction(action){beforeGetImageAction=action}detectBrowserFeatures();updateDomainHash();setVisitorIdCookie();executePluginMethod("run",registerHook);return{hook:registeredHooks,getHook:function(hookName){return registeredHooks[hookName]},getQuery:function(){return query},getContent:function(){return content},buildContentImpressionRequest:buildContentImpressionRequest,buildContentInteractionRequest:buildContentInteractionRequest,buildContentInteractionRequestNode:buildContentInteractionRequestNode,buildContentInteractionTrackingRedirectUrl:buildContentInteractionTrackingRedirectUrl,getContentImpressionsRequestsFromNodes:getContentImpressionsRequestsFromNodes,getCurrentlyVisibleContentImpressionsRequestsIfNotTrackedYet:getCurrentlyVisibleContentImpressionsRequestsIfNotTrackedYet,trackCallbackOnLoad:trackCallbackOnLoad,trackCallbackOnReady:trackCallbackOnReady,buildContentImpressionsRequests:buildContentImpressionsRequests,wasContentImpressionAlreadyTracked:wasContentImpressionAlreadyTracked,appendContentInteractionToRequestIfPossible:getContentInteractionToRequestIfPossible,setupInteractionsTracking:setupInteractionsTracking,trackContentImpressionClickInteraction:trackContentImpressionClickInteraction,internalIsNodeVisible:isVisible,isNodeAuthorizedToTriggerInteraction:isNodeAuthorizedToTriggerInteraction,replaceHrefIfInternalLink:replaceHrefIfInternalLink,getConfigDownloadExtensions:function(){return configDownloadExtensions},enableTrackOnlyVisibleContent:function(checkOnScroll,timeIntervalInMs){return enableTrackOnlyVisibleContent(checkOnScroll,timeIntervalInMs,this)},clearTrackedContentImpressions:function(){trackedContentImpressions=[]},getTrackedContentImpressions:function(){return trackedContentImpressions},clearEnableTrackOnlyVisibleContent:function(){isTrackOnlyVisibleContentEnabled=false},disableLinkTracking:function(){linkTrackingInstalled=false;linkTrackingEnabled=false},getConfigVisitorCookieTimeout:function(){return configVisitorCookieTimeout},getRemainingVisitorCookieTimeout:getRemainingVisitorCookieTimeout,setBeforeGetImageAction:setBeforeGetImageAction,getVisitorId:function(){return getValuesFromVisitorIdCookie().uuid},getVisitorInfo:function(){return loadVisitorIdCookie()},getAttributionInfo:function(){return loadReferrerAttributionCookie()},getAttributionCampaignName:function(){return loadReferrerAttributionCookie()[0]},getAttributionCampaignKeyword:function(){return loadReferrerAttributionCookie()[1]},getAttributionReferrerTimestamp:function(){return loadReferrerAttributionCookie()[2]},getAttributionReferrerUrl:function(){return loadReferrerAttributionCookie()[3]},setTrackerUrl:function(trackerUrl){configTrackerUrl=trackerUrl},getTrackerUrl:function(){return configTrackerUrl},getSiteId:function(){return configTrackerSiteId},setSiteId:function(siteId){setSiteId(siteId)},setUserId:function(userId){if(!isDefined(userId)||!userId.length){return}configUserId=userId;visitorUUID=hash(configUserId).substr(0,16)},getUserId:function(){return configUserId},setCustomData:function(key_or_obj,opt_value){if(isObject(key_or_obj)){configCustomData=key_or_obj}else{if(!configCustomData){configCustomData={}}configCustomData[key_or_obj]=opt_value}},getCustomData:function(){return configCustomData},setCustomRequestProcessing:function(customRequestContentProcessingLogic){configCustomRequestContentProcessing=customRequestContentProcessingLogic},appendToTrackingUrl:function(queryString){configAppendToTrackingUrl=queryString},getRequest:function(request){return getRequest(request)},addPlugin:function(pluginName,pluginObj){plugins[pluginName]=pluginObj},setCustomVariable:function(index,name,value,scope){var toRecord;if(!isDefined(scope)){scope="visit"}if(!isDefined(name)){return}if(!isDefined(value)){value=""}if(index>0){name=!isString(name)?String(name):name;value=!isString(value)?String(value):value;toRecord=[name.slice(0,customVariableMaximumLength),value.slice(0,customVariableMaximumLength)];if(scope==="visit"||scope===2){loadCustomVariables();customVariables[index]=toRecord}else if(scope==="page"||scope===3){customVariablesPage[index]=toRecord}else if(scope==="event"){customVariablesEvent[index]=toRecord}}},getCustomVariable:function(index,scope){var cvar;if(!isDefined(scope)){scope="visit"}if(scope==="page"||scope===3){cvar=customVariablesPage[index]}else if(scope==="event"){cvar=customVariablesEvent[index]}else if(scope==="visit"||scope===2){loadCustomVariables();cvar=customVariables[index]}if(!isDefined(cvar)||cvar&&cvar[0]===""){return false}return cvar},deleteCustomVariable:function(index,scope){if(this.getCustomVariable(index,scope)){this.setCustomVariable(index,"","",scope)}},storeCustomVariablesInCookie:function(){configStoreCustomVariablesInCookie=true},setLinkTrackingTimer:function(delay){configTrackerPause=delay},setDownloadExtensions:function(extensions){if(isString(extensions)){extensions=extensions.split("|")}configDownloadExtensions=extensions},addDownloadExtensions:function(extensions){var i;if(isString(extensions)){extensions=extensions.split("|")}for(i=0;i<extensions.length;i++){configDownloadExtensions.push(extensions[i])}},removeDownloadExtensions:function(extensions){var i,newExtensions=[];if(isString(extensions)){extensions=extensions.split("|")}for(i=0;i<configDownloadExtensions.length;i++){if(indexOfArray(extensions,configDownloadExtensions[i])===-1){newExtensions.push(configDownloadExtensions[i])}}configDownloadExtensions=newExtensions},setDomains:function(hostsAlias){configHostsAlias=isString(hostsAlias)?[hostsAlias]:hostsAlias;configHostsAlias.push(domainAlias)},setIgnoreClasses:function(ignoreClasses){configIgnoreClasses=isString(ignoreClasses)?[ignoreClasses]:ignoreClasses},setRequestMethod:function(method){configRequestMethod=method||defaultRequestMethod},setRequestContentType:function(requestContentType){configRequestContentType=requestContentType||defaultRequestContentType},setReferrerUrl:function(url){configReferrerUrl=url},setCustomUrl:function(url){configCustomUrl=resolveRelativeReference(locationHrefAlias,url)},setDocumentTitle:function(title){configTitle=title},setAPIUrl:function(apiUrl){configApiUrl=apiUrl},setDownloadClasses:function(downloadClasses){configDownloadClasses=isString(downloadClasses)?[downloadClasses]:downloadClasses},setLinkClasses:function(linkClasses){configLinkClasses=isString(linkClasses)?[linkClasses]:linkClasses},setCampaignNameKey:function(campaignNames){configCampaignNameParameters=isString(campaignNames)?[campaignNames]:campaignNames},setCampaignKeywordKey:function(campaignKeywords){configCampaignKeywordParameters=isString(campaignKeywords)?[campaignKeywords]:campaignKeywords},discardHashTag:function(enableFilter){configDiscardHashTag=enableFilter},setCookieNamePrefix:function(cookieNamePrefix){configCookieNamePrefix=cookieNamePrefix;customVariables=getCustomVariablesFromCookie()},setCookieDomain:function(domain){var domainFixed=domainFixup(domain);if(isPossibleToSetCookieOnDomain(domainFixed)){configCookieDomain=domainFixed;updateDomainHash()}},setCookiePath:function(path){configCookiePath=path;updateDomainHash()},setVisitorCookieTimeout:function(timeout){configVisitorCookieTimeout=timeout*1e3},setSessionCookieTimeout:function(timeout){configSessionCookieTimeout=timeout*1e3},setReferralCookieTimeout:function(timeout){configReferralCookieTimeout=timeout*1e3},setConversionAttributionFirstReferrer:function(enable){configConversionAttributionFirstReferrer=enable},disableCookies:function(){configCookiesDisabled=true;browserFeatures.cookie="0";if(configTrackerSiteId){deleteCookies()}},deleteCookies:function(){deleteCookies()},setDoNotTrack:function(enable){var dnt=navigatorAlias.doNotTrack||navigatorAlias.msDoNotTrack;configDoNotTrack=enable&&(dnt==="yes"||dnt==="1");if(configDoNotTrack){this.disableCookies()}},addListener:function(element,enable){addClickListener(element,enable)},enableLinkTracking:function(enable){linkTrackingEnabled=true;if(hasLoaded){addClickListeners(enable)}else{registeredOnLoadHandlers.push(function(){addClickListeners(enable)})}},enableKMAutoTracking:function(timeIntervalInMs){if(kmAutoTrackingInstalled)return;kmAutoTrackingInstalled=true;if(!isDefined(timeIntervalInMs)){timeIntervalInMs=750}function addListeners(){addKMListeners();setInterval(addKMListeners,timeIntervalInMs)}if(hasLoaded){addListeners()}else{registeredOnLoadHandlers.push(function(){addListeners()})}},enableJSErrorTracking:function(){if(enableJSErrorTracking){return}enableJSErrorTracking=true;var onError=windowAlias.onerror;windowAlias.onerror=function(message,url,linenumber,column,error){trackCallback(function(){var category="JavaScript Errors";var action=url+":"+linenumber;if(column){action+=":"+column}logEvent(category,action,message)});if(onError){return onError(message,url,linenumber,column,error)}return false}},disablePerformanceTracking:function(){configPerformanceTrackingEnabled=false},setGenerationTimeMs:function(generationTime){configPerformanceGenerationTime=parseInt(generationTime,10)},enableHeartBeatTimer:function(heartBeatDelayInSeconds){heartBeatDelayInSeconds=Math.max(heartBeatDelayInSeconds,1);configHeartBeatDelay=(heartBeatDelayInSeconds||15)*1e3;if(lastTrackerRequestTime!==null){setUpHeartBeat()}},disableHeartBeatTimer:function(){heartBeatDown();configHeartBeatDelay=null;window.removeEventListener("focus",heartBeatOnFocus);window.removeEventListener("blur",heartBeatOnBlur)},killFrame:function(){if(windowAlias.location!==windowAlias.top.location){windowAlias.top.location=windowAlias.location}},redirectFile:function(url){if(windowAlias.location.protocol==="file:"){windowAlias.location=url}},setCountPreRendered:function(enable){configCountPreRendered=enable},trackGoal:function(idGoal,customRevenue,customData){trackCallback(function(){logGoal(idGoal,customRevenue,customData)})},trackLink:function(sourceUrl,linkType,customData,callback){trackCallback(function(){logLink(sourceUrl,linkType,customData,callback)})},trackPageView:function(customTitle,customData){trackedContentImpressions=[];if(isOverlaySession(configTrackerSiteId)){trackCallback(function(){injectOverlayScripts(configTrackerUrl,configApiUrl,configTrackerSiteId)})}else{trackCallback(function(){logPageView(customTitle,customData)})}},trackAllContentImpressions:function(){if(isOverlaySession(configTrackerSiteId)){return}trackCallback(function(){trackCallbackOnReady(function(){var contentNodes=content.findContentNodes();var requests=getContentImpressionsRequestsFromNodes(contentNodes);sendBulkRequest(requests,configTrackerPause)})})},trackVisibleContentImpressions:function(checkOnSroll,timeIntervalInMs){if(isOverlaySession(configTrackerSiteId)){return}if(!isDefined(checkOnSroll)){checkOnSroll=true}if(!isDefined(timeIntervalInMs)){timeIntervalInMs=750}enableTrackOnlyVisibleContent(checkOnSroll,timeIntervalInMs,this);trackCallback(function(){trackCallbackOnLoad(function(){var contentNodes=content.findContentNodes();var requests=getCurrentlyVisibleContentImpressionsRequestsIfNotTrackedYet(contentNodes);sendBulkRequest(requests,configTrackerPause)})})},trackContentImpression:function(contentName,contentPiece,contentTarget){if(isOverlaySession(configTrackerSiteId)){return}if(!contentName){return}contentPiece=contentPiece||"Unknown";trackCallback(function(){var request=buildContentImpressionRequest(contentName,contentPiece,contentTarget);sendRequest(request,configTrackerPause)})},trackContentImpressionsWithinNode:function(domNode){if(isOverlaySession(configTrackerSiteId)||!domNode){return}trackCallback(function(){if(isTrackOnlyVisibleContentEnabled){trackCallbackOnLoad(function(){var contentNodes=content.findContentNodesWithinNode(domNode);var requests=getCurrentlyVisibleContentImpressionsRequestsIfNotTrackedYet(contentNodes);sendBulkRequest(requests,configTrackerPause)})}else{trackCallbackOnReady(function(){var contentNodes=content.findContentNodesWithinNode(domNode);var requests=getContentImpressionsRequestsFromNodes(contentNodes);sendBulkRequest(requests,configTrackerPause)})}})},trackContentInteraction:function(contentInteraction,contentName,contentPiece,contentTarget){if(isOverlaySession(configTrackerSiteId)){return}if(!contentInteraction||!contentName){return}contentPiece=contentPiece||"Unknown";trackCallback(function(){var request=buildContentInteractionRequest(contentInteraction,contentName,contentPiece,contentTarget);sendRequest(request,configTrackerPause)})},trackContentInteractionNode:function(domNode,contentInteraction){if(isOverlaySession(configTrackerSiteId)||!domNode){return}trackCallback(function(){var request=buildContentInteractionRequestNode(domNode,contentInteraction);sendRequest(request,configTrackerPause)})},trackEvent:function(category,action,name,value,customData){trackCallback(function(){logEvent(category,action,name,value,customData)})},trackSiteSearch:function(keyword,category,resultsCount){trackCallback(function(){logSiteSearch(keyword,category,resultsCount)})},setEcommerceView:function(sku,name,category,price){if(!isDefined(category)||!category.length){category=""}else if(category instanceof Array){category=JSON2.stringify(category)}customVariablesPage[5]=["_pkc",category];if(isDefined(price)&&String(price).length){customVariablesPage[2]=["_pkp",price]}if((!isDefined(sku)||!sku.length)&&(!isDefined(name)||!name.length)){return}if(isDefined(sku)&&sku.length){customVariablesPage[3]=["_pks",sku]}if(!isDefined(name)||!name.length){name=""}customVariablesPage[4]=["_pkn",name]},addEcommerceItem:function(sku,name,category,price,quantity){if(sku.length){ecommerceItems[sku]=[sku,name,category,price,quantity]}},trackEcommerceOrder:function(orderId,grandTotal,subTotal,tax,shipping,discount){logEcommerceOrder(orderId,grandTotal,subTotal,tax,shipping,discount)},trackEcommerceCartUpdate:function(grandTotal){logEcommerceCartUpdate(grandTotal)},useDefaults:function(){var pushedMethods=getMethodNames(_paq);var autoMethods=[["trackPageView"],["enableLinkTracking"],["trackAllContentImpressions"],["enableKMAutoTracking"]];for(var i=0;i<autoMethods.length;++i){var methodArray=autoMethods[i];if(indexOfArray(pushedMethods,methodArray[0])==-1){_paq.push(methodArray)}}}}}function TrackerProxy(){return{push:apply}}function applyMethodsInOrder(paq,methodsToApply){var appliedMethods={};var index,iterator;for(index=0;index<methodsToApply.length;index++){var methodNameToApply=methodsToApply[index];appliedMethods[methodNameToApply]=1;for(iterator=0;iterator<paq.length;iterator++){if(paq[iterator]&&paq[iterator][0]){var methodName=paq[iterator][0];if(methodNameToApply===methodName){apply(paq[iterator]);delete paq[iterator];if(appliedMethods[methodName]>1){if(console!==undefined&&console&&console.error){console.error("The method "+methodName+' is registered more than once in "paq" variable. Only the last call has an effect. Please have a look at the multiple Piwik trackers documentation: http://developer.piwik.org/guides/tracking-javascript-guide#multiple-piwik-trackers')}}appliedMethods[methodName]++}}}}return paq}addEventListener(windowAlias,"beforeunload",beforeUnloadHandler,false);addReadyListener();Date.prototype.getTimeAlias=Date.prototype.getTime;asyncTracker=new Tracker;var applyFirst=["useDefaults","disableCookies","setTrackerUrl","setAPIUrl","setCookiePath","setCookieDomain","setUserId","setSiteId","enableLinkTracking"];_paq=applyMethodsInOrder(_paq,applyFirst);for(iterator=0;iterator<_paq.length;iterator++){if(_paq[iterator]){apply(_paq[iterator])}}_paq=new TrackerProxy;Piwik={addPlugin:function(pluginName,pluginObj){plugins[pluginName]=pluginObj},getTracker:function(piwikUrl,siteId){if(!isDefined(siteId)){siteId=this.getAsyncTracker().getSiteId()}if(!isDefined(piwikUrl)){piwikUrl=this.getAsyncTracker().getTrackerUrl()}return new Tracker(piwikUrl,siteId)},getAsyncTracker:function(){return asyncTracker}};if(typeof define==="function"&&define.amd){define("piwik",[],function(){return Piwik})}return Piwik}()}if(window&&window.piwikAsyncInit){window.piwikAsyncInit()}(function(){var jsTrackerType=typeof AnalyticsTracker;if(jsTrackerType==="undefined"){AnalyticsTracker=Piwik}})();if(typeof piwik_log!=="function"){piwik_log=function(documentTitle,siteId,piwikUrl,customData){"use strict";function getOption(optionName){try{return eval("piwik_"+optionName)}catch(ignore){}return}var option,piwikTracker=Piwik.getTracker(piwikUrl,siteId);piwikTracker.setDocumentTitle(documentTitle);piwikTracker.setCustomData(customData);option=getOption("tracker_pause");if(option){piwikTracker.setLinkTrackingTimer(option)}option=getOption("download_extensions");if(option){piwikTracker.setDownloadExtensions(option)}option=getOption("hosts_alias");if(option){piwikTracker.setDomains(option)}option=getOption("ignore_classes");if(option){piwikTracker.setIgnoreClasses(option)}piwikTracker.trackPageView();if(getOption("install_tracker")){piwik_track=function(sourceUrl,siteId,piwikUrl,linkType){piwikTracker.setSiteId(siteId);piwikTracker.setTrackerUrl(piwikUrl);piwikTracker.trackLink(sourceUrl,linkType)};piwikTracker.enableLinkTracking()}}}